# 第一章 React简介

## 背景介绍
在Web应用开发早期，构建Web应用的唯一方案就是向服务器发送请求，然后服务器端响应请求并返回一个完整的页面。从开发角度上讲这种方式非常简单，因为开发者无须关心在浏览器端发生了什么。

像PHP这类语言更加简化了这种开发方式。使用PHP开发功能组件也很容易，这有助于开发者重用代码，掌控应用程序的行为。开发的简单性使得PHP称为了一门非常流行的Web应用开发语言。

不过，使用这种开发方式很难打造出极佳的用户体验。因为无论每次用户都想做点什么，都需要向服务器端发送请求并等待服务器端的响应，这回导致用户失去在页面上所积累的状态。

为了实现更好的用户体验，人民开始开发类库，使用JavaScript在浏览器端渲染应用。这些类库使用的方法也不尽相同，简单的会使用带参数的模板，赋值的就完全掌控整个应用。随着开发者在越来越大的应用中使用这些类库，应用也变得越来越难于把握，因为这些应用是一系列互相作用的事件的结果。与PHP那样传统的应用开发方式比起来，这种客户端应用很难做好。

React发源自Facebook的PHP框架XHP的一个分支。XHP作为一个PHP框架，旨在每次有请求进来时渲染整个页面。React的产生就是为了把这种重新渲染整个页面的PHP式工作流带到客户端应用中来。

React本质上是一个“状态机”，可以帮助开发者管理复杂的随着时间而变化的状态。它以一个精简的模型实现了这一点。React只关心两件事：
 1. 更新DOM
 2. 响应事件

React不处理Ajax、路由和数据存储，也不规定定数据组织的方式。它不是一个Model-View-Controller框架。如果非要问它是什么，它就是MVC里的“V”。React的精简允许你将它集成到各种各样的系统中。事实上，它已经在数个MVC框架中被用来渲染视图了。

在每次状态改变时，使用JavaScript重新渲染整个页面会导致非常慢，这应该归咎于读取和更新DOM的性能问它。React运用一个虚拟的DOM实现了一个非常强大的渲染系统，在React中对DOM只更新不读取。

React就像高性能的3D游戏引擎，以渲染函数为基础。这些函数读入当前的状态，将其转换为目标页面上的一个虚拟表现。只要React被告知状态有变化，它就会重新运行这些函数，计算出页面的一个新的虚拟表现，接着自动地把结果转换成为必要的DOM更新来翻译新的表现。

乍一看，这种方式应该比通常的JavaScript方案--按需更新每一个元素---要慢，但是React确实是这么做的：它使用了非常高效的算法，计算出虚拟页面当前版本和新版间的差异，基于这些差异对DOM进行必要的最少更新。

React赢就赢在最小化了重绘，并避免了不必要的DOM操作，这两点都是公认的性能瓶颈。

用户界面越复杂，就越容易发生这样的情况---一个用户交互出发一个更新，儿这个更新出发另外一个更新，一个接一个。如果没有恰当地把这些更新放到一起的话，性能就会大幅降低。更糟糕的是，有时候DOM元素在表达到最终状态前，会被更新好多次。

React的虚拟表示差异算法，不但能够把这些问题的影响降到最低（通过单个周期内进行最小的更新），还能简化应用的维护成本。当用户输入或者有其他更新导致状态改变时，我们只要简单地通知React状态改变了，它就能自动地处理剩下的事情。我们无须深入到详细的过程之中。

React在整个应用中只使用单个事件处理器，并且会把所有的事件委托到这个处理器上。这一点也提升了React的性能，因为如果有很多事件处理器也会导致性能问题。

